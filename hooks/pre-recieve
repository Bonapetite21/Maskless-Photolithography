#!/bin/bash

# Read input from stdin
while read oldrev newrev refname
do
    # Check if the branch being pushed is 'main'
    if [[ "$refname" == "refs/heads/main" ]]; then
        echo "Direct pushes to the 'main' branch are not allowed."
        exit 1
    fi
done

# Allow the push if no conditions are violated
exit 0
